<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Material Design for Bootstrap fonts and icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
    <!-- Material Design for Bootstrap CSS -->
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css" integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX" crossorigin="anonymous">
    <!--jquery ui-->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js" integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>

    <script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js" integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9" crossorigin="anonymous"></script>
    <script>$(document).ready(function() { $('body').bootstrapMaterialDesign(); });</script>
    <title>Hello, world!</title>
    <style>
        .bmd-layout-container{
            width: 600px;
            height: 600px;
        }


        #custom-search-input .search-query {
            padding-right: 3px;
            padding-right: 4px \9;
            padding-left: 3px;
            padding-left: 4px \9;
            /* IE7-8 doesn't have border-radius, so don't indent the padding */

            margin-bottom: 0;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
        }

        #custom-search-input button {
            border: 0;
            background: none;
            /** belows styles are working good */
            padding: 2px 5px;
            margin-top: 2px;
            position: relative;
            left: -28px;
            /* IE7-8 doesn't have border-radius, so don't indent the padding */
            margin-bottom: 0;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;
            color:#D9230F;
        }

        .search-query:focus + button {
            z-index: 3;
        }
        .col-xs-6 img{
            width: 250px;
            height: 200px;
        }
        #row_infor {
            padding: 20px;
        }

        #content_img
        {
            height: 400px;
        }
        .content-item{
            padding-top: 10px;
            padding-bottom: 10px;
        }
        .content-items{
            padding-top: 23px;
        }

        .content-item .row{
            height: 25px;
        }
        .tourist_spot{
            padding-top: 32px;
        }
        .horizontal-scroll {
            overflow-x: scroll;
            overflow-y: hidden;
            height: 300px;
            white-space:nowrap;
            -webkit-overflow-scrolling: touch;
        }
        .card {
            display: inline-block;
            margin-left: 28px;
        }
        .comment-wrapper .panel-body {
            max-height:650px;
            overflow:auto;
        }

        .media-list .media img {
            width:64px;
            height:64px;
            border:2px solid #e5e7e8;
        }

        .media-list .media {
            border-bottom:1px dashed #efefef;
            margin-bottom:25px;
        }

        .card-img-overlay{
            zoom: 1; /* ie 5,6,7 bug fix */
            filter: alpha(opacity=80);
            opacity: 0.8;
            background-image: linear-gradient(transparent, transparent, gray);
        }

        .review_card{
            margin-top: 1rem;
        }
        #tabs .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
            color: #0062cc;
            background-color: transparent;
            border-color: transparent transparent #f3f3f3;
            border-bottom: 3px solid !important;
            font-size: 16px;
            font-weight: bold;
        }
        .nav-link {
            border: 1px solid transparent;
            border-top-left-radius: .25rem;
            border-top-right-radius: .25rem;
            color: #0062cc;
            font-size: 16px;
            font-weight: 600;
        }

        .nav-pills .nav-link, .nav-tabs .nav-link {
            padding: 0.4286em 0.8575em;
            font-size: .875rem;
            font-weight: 500;
            border: 0;
        }
        .best_review_img{
            margin-left: -30px;
        }
    </style>
</head>
<body>
<div class="bmd-layout-container bmd-drawer-f-l bmd-drawer-overlay mx-auto">
    <header class="bmd-layout-header">
        <div class="navbar navbar-light bg-faded">
            <button class="navbar-toggler" type="button" data-toggle="drawer" data-target="#dw-s2">
                <span class="sr-only">Toggle drawer</span>
                <i class="material-icons">menu</i>
            </button>
            <ul class="nav navbar-nav mx-auto">
                <li class="nav-item">Festival</li>
            </ul>
        </div>
    </header>
    <div class="card bg-dark text-white mx-auto">
        <img id="content_img" src="../image/yahefestival.JPG" class="img-fluid" style="width: 600px" />
        <div class="card-img-overlay d-flex h-100 flex-column justify-content-end">
            <h5 class="card-title"> </h5>
            <p class="card-text"><i class="far fa-star"style="color:red"></i> 4.5</p>
        </div>
    </div>

    <div id="dw-s2" class="bmd-layout-drawer bg-faded">
        <header>
            <a class="navbar-brand">Sidebar</a>
        </header>
        <ul class="list-group">
            <a class="list-group-item"><i class="fas fa-user"></i>로그인</a>
        </ul>
    </div>
    <div class="container">
        <div class="content-items border-bottom border-dark">
            <div class="border-bottom content-item" id="address">
                <div class="row">
                    <div class="col-2 ">
                        <h5><p class="font-weight-bold">주소</p></h5>
                    </div>
                </div>
                <p class="mt-2"></p>
            </div>
            <div class="border-bottom content-item" id="term">
                <div class="row">
                    <div class="col-2 ">
                        <h5><p class="font-weight-bold">기간</p></h5>
                    </div>
                </div>
                <p class="mt-2"> </p>
            </div>
            <div class="border-bottom content-item" id="tel">
                <div class="row">
                    <div class="col-2 text-truncate">
                        <h5><p class="font-weight-bold">전화번호</p></h5>
                    </div>
                </div>
                <p class="mt-2"></p>
            </div>
        </div>
        <div class="content-items border-bottom border-dark">
            <div class="row">
                <div class="col">
                    <h5><p class="font-weight-bold">주간날씨</p></h5>
                </div>
                <div class="col-3">
                    <p class="font-weight-bold">대기오염지수 : </p>
                </div>
                <div class="col-3">
                    <p>나쁨 (80)</p>
                </div>
            </div>
            <table class="table table-bordered text-center">
                <thead>
                <tr>
                    <th scope="col">월</th>
                    <th scope="col">화</th>
                    <th scope="col">수</th>
                    <th scope="col">목</th>
                    <th scope="col">금</th>
                    <th scope="col">토</th>
                    <th scope="col">일</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><i class="fas fa-cloud-sun-rain"></i></td>
                    <td><i class="fas fa-cloud-rain"></i></td>
                    <td><i class="fas fa-cloud-rain"></i></td>
                    <td><i class="fas fa-cloud-rain"></i></td>
                    <td><i class="fas fa-cloud-rain"></i></td>
                    <td><i class="fas fa-cloud-rain"></i></td>
                    <td><i class="fas fa-cloud-rain"></i></td>
                </tr>
                <tr>
                    <td>21°C 22°C</td>
                    <td>21°C 22°C</td>
                    <td>21°C 22°C</td>
                    <td>21°C 22°C</td>
                    <td>21°C 22°C</td>
                    <td>21°C 22°C</td>
                    <td>21°C 22°C</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="content-items">
            <div class="row">
                <div class="col-10 ">
                    <h5><p class="font-weight-bold">주변 관광지</p></h5>
                </div>
                <div class="col-2 ">
                    <a href="#">
                        <p><i class="fas fa-plus"></i> more</p></a>
                </div>
            </div>
            <div class="horizontal-scroll">
                <div class="card">
                    <img src="http://placehold.it/200x140" />
                    <div class="card-body">
                        <p class="card-text">이름</p>
                        <p class="card-text"><small class="text-muted">약 1km</small></p>
                    </div>
                </div>
                <div class="card">
                    <img src="http://placehold.it/200x140" />
                    <div class="card-body">
                        <p class="card-text">이름</p>
                        <p class="card-text"><small class="text-muted">약 1km</small></p>
                    </div>
                </div>
                <div class="card">
                    <img src="http://placehold.it/200x140" />
                    <div class="card-body">
                        <p class="card-text">이름</p>
                        <p class="card-text"><small class="text-muted">약 1km</small></p>
                    </div>
                </div>
                <div class="card">
                    <img src="http://placehold.it/200x140" />
                    <div class="card-body">
                        <p class="card-text">이름</p>
                        <p class="card-text"><small class="text-muted">약 1km</small></p>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-items">
            <div class="row">
                <div class="col-4 ">
                    <h5><p class="font-weight-bold">리뷰</p></h5>
                </div>
            </div>
            <div class="row bootstrap snippets">
                <div class="col-6 col-offset-2 col-12">
                    <div class="comment-wrapper">
                        <div class="panel panel-info">
                            <div class="label">
                                Comment panel
                            </div>
                            <div class="panel-body">
                                <textarea class="form-control" placeholder="write a comment..." ></textarea>
                                <br>
                                <button type="button" class="btn btn-info float-right">Post</button>
                                <div class="clearfix"></div>
                                <hr>
                            </div>
                        </div>
                    </div>
                </div>

                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                        <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">인기 리뷰</a>
                        <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">모든 리뷰</a>
                    </div>
                </nav>
                <div class="tab-content mt-4" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                        <!-- 긍정적 리뷰 -->
                        <div class="card review_card mb-2" style="width: 35rem;">
                            <div class="card-header">
                                인기 리뷰(긍정적)
                            </div>
                            <div class="card-body">
                                <blockquote class="blockquote mb-0">
                                    <ul class="media-list">
                                        <li class="media">
                                            <a href="#" class="float-left mr-3 best_review_img">
                                                <img src="https://bootdey.com/img/Content/user_1.jpg" alt="" class="rounded-circle">
                                            </a>
                                            <div class="media-body">
                                                <strong class="text-success">MartinoMont</strong>
                                                <span class="text-muted float-right">
                                                <small class="text-muted">2019.08.11</small>
                                            </span>
                                                <p class="star_review">
                                                    <i class="fas fa-star"></i> 4.8
                                                </p>
                                                <p>
                                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                                    Lorem ipsum dolor sit amet
                                                </p>
                                            </div>
                                        </li>
                                    </ul>
                                    <div class="row">
                                        <footer class="blockquote-footer col-7"> 이 리뷰가 도움이 되었습니까?</footer>
                                        <button class="btn btn-primary col-2">예</button> <button class="btn btn-primary col-2">아니오</button>
                                    </div>
                                </blockquote>
                            </div>
                        </div>
                        <!-- 부정적 리뷰 -->
                        <div class="card review_card mb-4" style="width: 35rem;">
                            <div class="card-header">
                                인기 리뷰(부정적)
                            </div>
                            <div class="card-body">
                                <blockquote class="blockquote mb-0">
                                    <ul class="media-list">
                                        <li class="media">
                                            <a href="#" class="float-left mr-3 best_review_img">
                                                <img src="https://bootdey.com/img/Content/user_2.jpg" alt="" class="rounded-circle">
                                            </a>
                                            <div class="media-body">
                                                <strong class="text-success">MartinoMont</strong>
                                                <span class="text-muted float-right">
                                                <small class="text-muted">2019.08.11</small>
                                            </span>
                                                <p class="star_review">
                                                    <i class="fas fa-star"></i> 4.8
                                                </p>
                                                <p>
                                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                                    Lorem ipsum dolor sit amet
                                                </p>
                                            </div>
                                        </li>
                                    </ul>
                                    <div class="row">
                                        <footer class="blockquote-footer col-7"> 이 리뷰가 도움이 되었습니까?</footer>
                                        <button class="btn btn-primary col-2">예</button> <button class="btn btn-primary col-2">아니오</button>
                                    </div>
                                </blockquote>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                        <ul class="list-unstyled">
                            <li class="media mb-1">
                                <a href="#" class="float-left mr-4">
                                    <img  src="https://bootdey.com/img/Content/user_1.jpg" alt="" class="rounded-circle">
                                </a>
                                <div class="media-body">
                                    <strong class="text-success">MartinoMont</strong>
                                    <span class="text-muted float-right">
                                     <small class="text-muted">2019.08.11</small>
                                    </span>
                                    <p class="star_review">
                                        <i class="fas fa-star"></i> 4.8
                                    </p>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                        Lorem ipsum dolor sit amet
                                    </p>
                                </div>
                            </li>
                            <li class="media mb-1">
                                <a href="#" class="float-left mr-4">
                                    <img src="https://bootdey.com/img/Content/user_2.jpg" alt="" class="rounded-circle">
                                </a>
                                <div class="media-body">
                                <span class="text-muted float-right">
                                    <small class="text-muted">2019.08.11</small>
                                </span>

                                    <strong class="text-success">LaurenceCorreil</strong>
                                    <p class="star_review">
                                        <i class="fas fa-star"></i> 4.8
                                    </p>
                                    <p>
                                        Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                        Lorem ipsum dolor <a href="#">#ipsumdolor </a>adipiscing elit.
                                    </p>
                                </div>
                            </li>
                            <li class="media mb-1">
                                <a href="#" class="float-left mr-4">
                                    <img src="https://bootdey.com/img/Content/user_3.jpg" alt=""class="rounded-circle">
                                </a>
                                <div class="media-body">
                        <span class="text-muted float-right">
                            <small class="text-muted">2019.08.11</small>
                         </span>
                                    <strong class="text-success">JohnNida</strong>
                                    <p class="star_review">
                                        <i class="fas fa-star"></i> 4.8
                                    </p>
                                    <p>
                                        Lorem ipsum dolor sitamet sit amet, consectetur adipiscing elit.
                                    </p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>

    </div>


</div>
</body>
<script type="text/javascript">

    var param = document.location.href.split("content/");

    $( document ).ready(function() {
        var param = {"pageNo": "1", "numOfRows": "11", "eventStartDate": "20190816", "title": str};
        $.ajax({
            url: "/api/festivalSearch",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data: JSON.stringify(param),
        }).done(function (data) {
            globalpage=data.length/10-1;//////////////////////////////////////
            alert(data.length+"-데이터갯수"+globalpage+"-글로벌갯수");
            //    $appendData2 = $('<div class="row"></div>');
            for (var i = 0; i < data.length; i++) {
                $festival_item3 = $('<div class="horizontal-scroll">\n' +
                    '               <div class="card">\n' +
                    '                   <img src="http://placehold.it/200x140"/>\n' +
                    '                   <div class="card-body">\n' +
                    '               <p class="card-text">이름</p>\n' +
                    '               <p class="card-text"><small class="text-muted">약 1km</small></p>\n' +
                    '               </div>\n' +
                    '           </div>');
                $festival_item3.find('p').text(data[i].title);
                $festival_item3.find('a').attr('href',"content/" + data[i].contentId);
                $festival_item3.children().children('img').attr('src', data[i].firstImage2);
                //    alert("done!" + data.length + data[i].title);
                //            $appendData2.append($festival_item3);

            }
            alert("검색일단완료");
            $('.horizontal-scroll').append($festival_item3);//띄어줌
        }).fail(function () {
        });
    });

    $( document ).ready(function() {
        $.ajax({
            url: "/api/festivalContent",
            type: "POST",
            dataType: "json",
            contentType: "application/json",
            data : param[1],
        }).done(function( data ) {
            $('.card-title').text(data.title);
            $('#content_img').attr('src',data.firstImage);
            $('#address p:nth-child(2)').text(data.addr1);
            $('#term p:nth-child(2)').text(StringtoDate(data.eventStartDate)+' ~ '+StringtoDate(data.eventEndDate));
            $('#tel p:nth-child(2)').text(data.tel);

        }).fail(function() {
            alert('fail');
        });
    });

    function StringtoDate(str) {
        var date;
        date = str.substring(0,4);
        date += '/';
        date += str.substring(4,6);
        date += '/';
        date += str.substring(6,8);

        return date;
    }


</script>
</html>